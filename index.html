<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Focus Forest</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0f2f2a; --bg2:#0b2420; --card:#163b34;
  --accent:#5cf2c2; --accent2:#2fd6a2;
  --text:#e6fffa; --muted:#9dd5c6;
}
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(180deg,var(--bg),var(--bg2));
  color:var(--text);
}
.app{max-width:420px;margin:auto;padding:16px}
.card{background:var(--card);border-radius:22px;padding:18px;margin-bottom:14px}
.row{display:flex;justify-content:space-between;align-items:center}
.center{text-align:center}
.stat{font-weight:700}

.main-tree{font-size:90px;margin:12px 0;transition:.3s}
.main-tree.water{transform:scale(1.15)}

.timer{font-size:56px;margin:10px 0}

button{border:none;cursor:pointer;font-family:inherit}

.plant-btn{
  width:100%;padding:18px;border-radius:18px;
  font-size:18px;font-weight:700;
  background:linear-gradient(135deg,var(--accent),var(--accent2))
}

.controls{display:flex;justify-content:center;gap:12px;margin-top:12px}
.ctrl{background:#1b4d43;color:var(--text);padding:12px 16px;border-radius:14px}

.water-btn{
  width:100%;margin-top:14px;background:#1e5f52;
  padding:14px;border-radius:16px;color:var(--text)
}

.menu{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.menu button{background:#1b4d43;color:var(--text);padding:14px;border-radius:16px}

select{
  background:#1b4d43;color:white;border:none;
  padding:8px 10px;border-radius:10px;
}

.select-row{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:6px;
}

.modal{position:fixed;inset:0;background:#0008;display:none;align-items:center;justify-content:center;z-index:10}
.modal.active{display:flex}
.modal-box{background:var(--card);width:92%;max-height:85%;overflow:auto;border-radius:22px;padding:16px}
.close{background:#ef4444;color:white;padding:8px 12px;border-radius:12px;float:right}

.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
.item{background:#0003;border-radius:14px;padding:8px;text-align:center}
.item small{display:block;font-size:11px;color:var(--muted)}

.toast{
  position:fixed;bottom:20px;left:50%;
  transform:translateX(-50%);
  background:black;color:white;
  padding:10px 18px;border-radius:20px;
  display:none
}
</style>
</head>

<body>
<div class="app">

<!-- STATS -->
<div class="card row">
  <div class="stat">ğŸŒ³ <span id="trees">0</span></div>
  <div class="stat">â­ <span id="stars">0</span>
    <button onclick="dailyBonus()" style="background:none;color:white">ğŸ</button>
  </div>
</div>

<!-- TREE -->
<div class="card center">
  <div id="tree" class="main-tree">ğŸŒ±</div>
</div>

<!-- TIMER -->
<div class="card center">

  <div class="select-row">
    <select id="timerSelect">
      <option value="5">5 min</option>
      <option value="10">10 min</option>
      <option value="25" selected>25 min</option>
      <option value="45">45 min</option>
      <option value="60">60 min</option>
    </select>

    <select id="inventorySelect" onchange="equipItem()">
      <option value="">Inventory</option>
    </select>
  </div>

  <div id="timer" class="timer">25:00</div>

  <button class="plant-btn" onclick="startTimer()">ğŸŒ± Plant Tree</button>

  <div class="controls">
    <button class="ctrl" onclick="pauseTimer()">â¸</button>
    <button class="ctrl" onclick="resetTimer()">ğŸ”</button>
  </div>

  <button class="water-btn" onclick="waterTree()">ğŸ’§ Water</button>
</div>

<!-- MENU -->
<div class="card menu">
  <button onclick="openStore('tree')">ğŸŒ± Tree Store</button>
  <button onclick="openStore('animal')">ğŸ¾ Animal Store</button>
  <button onclick="openStore('rebirth')">ğŸ”„ Rebirth Store</button>
  <button onclick="openAchievements()">ğŸ† Achievements</button>
</div>

</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-box">
    <button class="close" onclick="closeModal()">Close</button>
    <h3 id="modalTitle"></h3>
    <div id="modalBody"></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/* STATE */
let stars = 0;
let trees = 0;
let timer = 1500;
let interval = null;
let growthStage = 0;
let inventory = [];
let claimed = false;
let rebirthed = false;

const stages = ["ğŸŒ±","ğŸŒ¿","ğŸŒ³","ğŸŒ²","ğŸŒ³âœ¨"];
const treeStore = ["ğŸŒ±","ğŸŒ¸","ğŸ","ğŸª´","ğŸ‚","ğŸŒµ","ğŸ","ğŸ„"];
const animalStore = ["ğŸ¶","ğŸ±","ğŸ°","ğŸ¦Š","ğŸ»","ğŸ¼","ğŸ¦","ğŸ¦„"];
const rebirthStore = ["ğŸ¦„","ğŸ²","ğŸŒ·","ğŸª·","ğŸª¸","ğŸ¦š","ğŸ¦¢"];

/* ELEMENTS */
const starsEl = document.getElementById("stars");
const treesEl = document.getElementById("trees");
const treeEl = document.getElementById("tree");
const timerEl = document.getElementById("timer");
const timerSelect = document.getElementById("timerSelect");
const invSelect = document.getElementById("inventorySelect");

/* SAVE / LOAD */
function save(){
  localStorage.setItem("focusForest", JSON.stringify({
    stars, trees, growthStage, inventory, claimed, rebirthed
  }));
}
function load(){
  const d = JSON.parse(localStorage.getItem("focusForest"));
  if(!d) return;
  stars=d.stars; trees=d.trees; growthStage=d.growthStage;
  inventory=d.inventory||[];
  claimed=d.claimed; rebirthed=d.rebirthed;
}
load();

/* UI */
function updateInventory(){
  invSelect.innerHTML = '<option value="">Inventory</option>';
  inventory.forEach(i=>{
    invSelect.innerHTML += `<option value="${i}">${i}</option>`;
  });
}
function updateUI(){
  starsEl.textContent = stars;
  treesEl.textContent = trees;
  treeEl.textContent = stages[growthStage] || "ğŸŒ³";
  timerEl.textContent =
    String(Math.floor(timer/60)).padStart(2,"0") + ":" +
    String(timer%60).padStart(2,"0");
  updateInventory();
  save();
}
updateUI();

/* TIMER */
function startTimer(){
  if(interval) return;
  timer = parseInt(timerSelect.value) * 60;

  interval = setInterval(()=>{
    timer--;
    if(timer <= 0){
      clearInterval(interval);
      interval = null;
      trees++;
      stars += 50;
      growthStage = Math.min(growthStage + 1, 4);
      toast("Session complete ğŸŒ± +50â­");
      resetTimer();
    }
    updateUI();
  },1000);
}
function pauseTimer(){
  if(interval){
    clearInterval(interval);
    interval = null;
  }
}
function resetTimer(){
  pauseTimer();
  timer = parseInt(timerSelect.value) * 60;
  updateUI();
}

/* WATER */
function waterTree(){
  treeEl.classList.add("water");
  setTimeout(()=>treeEl.classList.remove("water"),300);
  toast("Tree watered ğŸ’§");
}

/* INVENTORY */
function equipItem(){
  if(invSelect.value){
    treeEl.textContent = invSelect.value;
  }
}

/* DAILY BONUS */
function dailyBonus(){
  if(claimed) return toast("Already claimed");
  claimed = true;
  const b = [50,60,100][Math.floor(Math.random()*3)];
  stars += b;
  toast("Daily bonus +" + b + "â­");
  updateUI();
}

/* STORE */
function openStore(type){
  let items=[], base=0, extra="";
  if(type==="tree"){items=treeStore;base=10;}
  if(type==="animal"){items=animalStore;base=50;}
  if(type==="rebirth"){
    items=rebirthStore;base=100;
    extra=`<button class="plant-btn" onclick="doRebirth()">ğŸ”„ REBIRTH (1000â­)</button><br><br>`;
  }

  modalTitle.textContent = type.toUpperCase()+" STORE";
  modalBody.innerHTML = extra + '<div class="grid">' +
    items.map((i,idx)=>{
      let p = idx<2 ? 0 : base*idx;
      return `<div class="item" onclick="buy('${i}',${p})">
        ${i}<small>${p}â­</small></div>`;
    }).join("") + '</div>';

  modal.classList.add("active");
}
function buy(item, price){
  if(stars < price) return toast("Not enough â­");
  stars -= price;
  inventory.push(item);
  treeEl.textContent = item;
  toast(item + " unlocked");
  updateUI();
}

/* REBIRTH */
function doRebirth(){
  if(stars < 1000) return toast("Need 1000â­");
  stars = 0; trees = 0; growthStage = 0;
  inventory = [];
  rebirthed = true;
  toast("Rebirth successful ğŸ”„");
  closeModal();
  updateUI();
}

/* ACHIEVEMENTS */
function openAchievements(){
  modalTitle.textContent = "Achievements";
  modalBody.innerHTML = `
    <div class="item">First Session ${trees>=1?"âœ…":"âŒ"}</div>
    <div class="item">100â­ ${stars>=100?"âœ…":"âŒ"}</div>
    <div class="item">Rebirth ${rebirthed?"âœ…":"âŒ"}</div>`;
  modal.classList.add("active");
}

/* MISC */
function closeModal(){modal.classList.remove("active");}
function toast(t){
  const x = document.getElementById("toast");
  x.textContent = t;
  x.style.display = "block";
  setTimeout(()=>x.style.display="none",2000);
}
</script>
</body>
</html>
